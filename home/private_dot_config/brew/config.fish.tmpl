#! /usr/bin/env fish
# chezmoi:template:left-delimiter="# [[" right-delimiter="]]"

# See https://docs.brew.sh/Manpage#environment

if command --query bat
    set --global --export HOMEBREW_BAT 1
end

set --global --export HOMEBREW_DISPLAY_INSTALL_TIMES 1

# [[  $credentials := includeTemplate "1password_api_credentials.tmpl" . | fromJson -]]
# [[- $v := dig "github" "homebrew_api" nil $credentials -]]
# [[- if $v -]]
set --global --export HOMEBREW_GITHUB_API_TOKEN # [[ $v.credential.value | quote ]]
# [[-   end ]]

# [[- $v := dig "github" "homebrew_packages" nil $credentials -]]
# [[- if $v -]]
set --global --export HOMEBREW_GITHUB_PACKAGES_TOKEN # [[ $v.credential.value | quote ]]
set --global --export HOMEBREW_GITHUB_PACKAGES_USER # [[ $v.username.value | quote ]]
# [[-   end ]]

# set --global --export HOMEBREW_NO_ANALYTICS 1
# set --global --export HOMEBREW_NO_AUTO_UPDATE 1
# set --global --export HOMEBREW_NO_GITHUB_API 1

set --global --export HOMEBREW_NO_INSECURE_REDIRECT 1
